<div class="task-board" cdkDropListGroup>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Loading tasks...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-container">
    <mat-icon color="warn">error</mat-icon>
    <p>{{ error }}</p>
    <button mat-raised-button color="primary" (click)="loadData()">
      Retry
    </button>
  </div>

  <!-- Task Lists -->
  <mat-card class="task-column" *ngFor="let taskList of taskLists">
    <mat-card-header class="task-list-header">
      <mat-card-title class="task-list-title">
        {{ taskList.name }}
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="task-list" cdkDropList [cdkDropListData]="getTasksByList(taskList.id)"
        (cdkDropListDropped)="onTaskDrop($event, taskList.id)">
        <app-task-card *ngFor="let task of getTasksByList(taskList.id)" [task]="task" [cdkDragData]="task" cdkDrag
          (click)="openTaskDetails(task)" class="task-card" [class.cursor-pointer]="true">
        </app-task-card>
      </div>
      <div class="add-card-container">
        <button mat-button color="none" class="add-card-button">
          <mat-icon>add</mat-icon>
          Add a Card
        </button>
      </div>
    </mat-card-content>
  </mat-card>
</div>