<div class="task-card" (click)="openDialog()" (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()">
    @if (projectColor()) {
    <div class="project-dot" [style.background-color]="projectColor()"></div>
    }
    <div class="card-content">
        <input type="checkbox" class="task-checkbox" [checked]="displayDone()"
            (click)="$event.preventDefault(); toggleComplete($event)" />
        <div class="task-title" [class.completed]="displayDone()">{{ task().name }}</div>
    </div>
    @if (task().dueDate || task().timeEstimate || task().checklist?.length || task().subtasks?.length || task().parentTaskID || task().taskTypeEnum
    === 'tracking' || task().taskTypeEnum === 'scheduled') {
    <div class="meta-info">
        @if (task().dueDate) {
        <span class="due-date-tag" [class.overdue]="isOverdue()" [class.due-today]="isDueToday()">
            <mat-icon class="icon-xs">schedule</mat-icon>
            {{ task().dueDate | date:'MMM d' }}
        </span>
        }
        @if (task().timeEstimate) {
        <span class="time-estimate-badge">
            <mat-icon class="icon-xs">timer</mat-icon>
            {{ formatEstimate(task().timeEstimate) }}
        </span>
        }
        @if (checklistProgress()) {
        <span class="checklist-badge">
            <mat-icon class="icon-xs">checklist</mat-icon>
            {{ checklistProgress() }}
        </span>
        }
        <span class="spacer"></span>
        @if (task().subtasks?.length) {
        <mat-icon class="hierarchy-icon" matTooltip="Parent Task">account_tree</mat-icon>
        }
        @if (task().parentTaskID) {
        <mat-icon class="hierarchy-icon" matTooltip="Subtask">subdirectory_arrow_right</mat-icon>
        }
        @if (task().taskTypeEnum === 'tracking') {
        <mat-icon class="tracking-icon" matTooltip="Tracking">package_2</mat-icon>
        }
        @if (task().taskTypeEnum === 'scheduled') {
        <mat-icon class="tracking-icon" matTooltip="Scheduled" style="color: #4bce97;">schedule</mat-icon>
        }
    </div>
    }
</div>