<div class="canvas-container" #canvasContainer (click)="hideContextMenu()">
  <canvas #mainCanvas
    (mousedown)="onMouseDown($event)"
    (mousemove)="onMouseMove($event)"
    (mouseup)="onMouseUp($event)"
    (mouseleave)="onMouseUp($event)"
    (dblclick)="onDoubleClick($event)"
    (wheel)="onWheel($event)"
    (contextmenu)="onContextMenu($event)">
  </canvas>
  @if (contextMenuVisible) {
    <div class="context-menu" [style.left.px]="contextMenuX" [style.top.px]="contextMenuY">
      @if (contextMenuTarget) {
        <div class="context-menu-item" (click)="onContextMenuAction('rotate')">
          <span class="icon">â†»</span> Rotate 90Â°
        </div>
        <div class="context-menu-item" (click)="onContextMenuAction('flip')">
          <span class="icon">â†”</span> Flip
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" (click)="onContextMenuAction('bringToFront')">
          <span class="icon">â¬†</span> Bring to Front
        </div>
        <div class="context-menu-item" (click)="onContextMenuAction('moveForward')">
          <span class="icon">â†‘</span> Move Forward
        </div>
        <div class="context-menu-item" (click)="onContextMenuAction('moveBackward')">
          <span class="icon">â†“</span> Move Backward
        </div>
        <div class="context-menu-item" (click)="onContextMenuAction('sendToBack')">
          <span class="icon">â¬‡</span> Send to Back
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" (click)="onContextMenuAction('delete')">
          <span class="icon">ðŸ—‘</span> Delete
        </div>
      }
    </div>
  }
</div>
